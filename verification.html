<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Verificaci√≥n GymTony V2.4.10 - CORRECCI√ìN 2.GITHUB.IO</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: #2a2a2a;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00ff00;
        }
        h1 {
            color: #ff6b6b;
            text-align: center;
            border-bottom: 2px solid #ff6b6b;
            padding-bottom: 10px;
        }
        .test {
            margin: 20px 0;
            padding: 15px;
            background: #1a1a1a;
            border-radius: 5px;
            border-left: 4px solid #00ff00;
        }
        .loading {
            color: #ffaa00;
        }
        .success {
            color: #00ff00;
        }
        .error {
            color: #ff4444;
        }
        .info {
            color: #4488ff;
        }
        .button {
            background: #dc2626;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-family: inherit;
            margin: 5px;
        }
        .button:hover {
            background: #b91c1c;
        }
        .url-input {
            width: 100%;
            padding: 10px;
            background: #1a1a1a;
            color: #00ff00;
            border: 1px solid #00ff00;
            border-radius: 5px;
            font-family: inherit;
        }
        .progress {
            background: #1a1a1a;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #dc2626, #f87171);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç GYMTONY V2.4.10 - DEPLOY CON CORRECCI√ìN 2.GITHUB.IO</h1>
        
        <div class="test">
            <h3 class="info">üì± URL a verificar:</h3>
            <input type="text" id="urlInput" class="url-input" value="https://jstony2000.github.io/gymtony-v2-working/">
            <button class="button" onclick="checkAll()">üöÄ INICIAR VERIFICACI√ìN</button>
        </div>

        <div id="progress" class="progress">
            <div id="progressBar" class="progress-bar"></div>
        </div>

        <div id="results">
            <div class="test">
                <h3>1. üåê Verificar p√°gina principal</h3>
                <div id="homepageResult" class="loading">‚è≥ Verificando...</div>
            </div>

            <div class="test">
                <h3>2. üìú Verificar force-red-theme-ultra.js</h3>
                <div id="scriptResult" class="loading">‚è≥ Verificando...</div>
            </div>

            <div class="test">
                <h3>3. üõ†Ô∏è Verificar correcci√≥n error 2.github.io</h3>
                <div id="errorResult" class="loading">‚è≥ Verificando correcci√≥n del error 2.github.io...</div>
            </div>

            <div class="test">
                <h4>üìù Cambios en v2.4.10:</h4>
                <ul style="text-align: left; color: #00ff00;">
                    <li>‚úÖ window.location.replace("/gymtony-v2-working/")</li>
                    <li>‚úÖ useEffect route validation corregido</li>
                    <li>‚úÖ GitHub Pages base path preservado</li>
                    <li>‚úÖ Cache busting implementado</li>
                </ul>
            </div>

            <div class="test">
                <h4>üì± Verificar PWA manifest</h4>
                <div id="manifestResult" class="loading">‚è≥ Verificando...</div>
            </div>

            <div class="test">
                <h5>üîÑ Tiempo de propagaci√≥n</h5>
                <div id="timeResult" class="info">‚è∞ Calculando...</div>
            </div>
        </div>

        <div class="test">
            <h3 class="success">üìã INSTRUCCIONES PARA APK</h3>
            <p><strong>URL para PWABuilder:</strong> <span id="pwabuilderUrl" style="color: #ffaa00;">https://jstony2000.github.io/gymtony-v2-working/</span></p>
            <p>1. Ir a: <strong>https://pwabuilder.com</strong></p>
            <p>2. Ingresar URL: <strong>https://jstony2000.github.io/gymtony-v2-working/</strong></p>
            <p>3. Clic en: <strong>"Start"</strong></p>
            <p>4. Seleccionar: <strong>"Android"</strong></p>
            <p>5. Descargar: <strong>"Download Package"</strong></p>
        </div>
    </div>

    <script>
        let testCount = 0;
        let totalTests = 5;
        
        function updateProgress() {
            const percentage = (testCount / totalTests) * 100;
            document.getElementById('progressBar').style.width = percentage + '%';
        }
        
        function checkHomepage() {
            const url = document.getElementById('urlInput').value;
            fetch(url)
                .then(response => {
                    testCount++;
                    updateProgress();
                    if (response.ok) {
                        return response.text();
                    } else {
                        throw new Error('HTTP ' + response.status);
                    }
                })
                .then(data => {
                    const isValid = data.includes('GymTony') || data.includes('index.html') || data.length > 100;
                    document.getElementById('homepageResult').innerHTML = isValid 
                        ? '‚úÖ <span class="success">P√ÅGINA ACCESIBLE - No est√° en blanco</span>'
                        : '‚ùå <span class="error">P√°gina accesible pero contenido m√≠nimo</span>';
                })
                .catch(error => {
                    testCount++;
                    updateProgress();
                    document.getElementById('homepageResult').innerHTML = '‚ùå <span class="error">Error: ' + error.message + '</span>';
                });
        }
        
        function checkScript() {
            const scriptUrl = document.getElementById('urlInput').value + 'force-red-theme-ultra.js';
            fetch(scriptUrl)
                .then(response => {
                    testCount++;
                    updateProgress();
                    if (response.ok) {
                        return response.text();
                    } else {
                        throw new Error('HTTP ' + response.status);
                    }
                })
                .then(data => {
                    const hasContent = data.includes('GYMTONY ULTRA THEME') || data.length > 1000;
                    document.getElementById('scriptResult').innerHTML = hasContent
                        ? '‚úÖ <span class="success">SCRIPT DISPONIBLE - force-red-theme-ultra.js funciona</span>'
                        : '‚ö†Ô∏è <span class="info">Script accesible pero contenido m√≠nimo</span>';
                })
                .catch(error => {
                    testCount++;
                    updateProgress();
                    document.getElementById('scriptResult').innerHTML = '‚ùå <span class="error">No disponible: ' + error.message + '</span><br><small>Puede tardar 2-5 minutos en propagarse</small>';
                });
        }
        
        function checkError2Github() {
            fetch('https://jstony2000.github.io/gymtony-v2-working/')
                .then(response => {
                    testCount++;
                    updateProgress();
                    if (response.ok) {
                        return response.text();
                    } else {
                        throw new Error('HTTP ' + response.status);
                    }
                })
                .then(data => {
                    // Verificar que la versi√≥n sea 2.4.10
                    const hasV210 = data.includes('2.4.10') || data.includes('V 2.4.10');
                    // Verificar que no haya error 2.github.io
                    const noError2github = !data.includes('2.github.io');
                    // Verificar que la aplicaci√≥n carga correctamente
                    const appLoads = data.includes('GymTony') || data.includes('index-FnI7mOub.js');
                    
                    if (hasV210 && noError2github && appLoads) {
                        document.getElementById('errorResult').innerHTML = '‚úÖ <span class="success">ERROR 2.GITHUB.IO CORREGIDO - v2.4.10 funcionando</span>';
                    } else if (hasV210) {
                        document.getElementById('errorResult').innerHTML = '‚ö†Ô∏è <span class="info">v2.4.10 detectada, pero verificar carga de aplicaci√≥n</span>';
                    } else {
                        document.getElementById('errorResult').innerHTML = '‚ùå <span class="error">Error 2.github.io puede persistir - verificar despliegue</span>';
                    }
                })
                .catch(error => {
                    testCount++;
                    updateProgress();
                    document.getElementById('errorResult').innerHTML = '‚ùå <span class="error">Error verificando correcci√≥n: ' + error.message + '</span>';
                });
        }
        
        function checkManifest() {
            const manifestUrl = document.getElementById('urlInput').value + 'manifest.json';
            fetch(manifestUrl)
                .then(response => {
                    testCount++;
                    updateProgress();
                    if (response.ok) {
                        return response.json();
                    } else {
                        throw new Error('HTTP ' + response.status);
                    }
                })
                .then(data => {
                    const hasTheme = data.theme_color === '#dc2626' || data.background_color === '#dc2626';
                    document.getElementById('manifestResult').innerHTML = hasTheme
                        ? '‚úÖ <span class="success">MANIFEST PWA CORRECTO - Tema rojo configurado</span>'
                        : '‚ö†Ô∏è <span class="info">Manifest accesible pero tema sin configurar</span>';
                })
                .catch(error => {
                    testCount++;
                    updateProgress();
                    document.getElementById('manifestResult').innerHTML = '‚ùå <span class="error">Error manifest: ' + error.message + '</span>';
                });
        }
        
        function checkTime() {
            const deployTime = new Date('2025-11-10T09:58:20');
            const now = new Date();
            const diffMinutes = Math.floor((now - deployTime) / 60000);
            
            testCount++;
            updateProgress();
            
            let timeMsg = `‚è∞ Deploy realizado hace ${diffMinutes} minutos`;
            if (diffMinutes < 2) {
                timeMsg += '<br>üîÑ <span class="info">Propagaci√≥n en curso - esperando...</span>';
            } else if (diffMinutes < 5) {
                timeMsg += '<br>‚úÖ <span class="success">Propagaci√≥n probable completada</span>';
            } else {
                timeMsg += '<br>üéØ <span class="success">Propagaci√≥n definitivamente completada</span>';
            }
            
            document.getElementById('timeResult').innerHTML = timeMsg;
        }
        
        function checkAll() {
            // Reset
            testCount = 0;
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('homepageResult').innerHTML = '‚è≥ Verificando...';
            document.getElementById('scriptResult').innerHTML = '‚è≥ Verificando...';
            document.getElementById('errorResult').innerHTML = '‚è≥ Verificando correcci√≥n 2.github.io...';
            document.getElementById('manifestResult').innerHTML = '‚è≥ Verificando...';
            document.getElementById('timeResult').innerHTML = '‚è∞ Calculando...';
            
            // Update PWABuilder URL
            const url = document.getElementById('urlInput').value;
            document.getElementById('pwabuilderUrl').textContent = url;
            
            // Run all checks
            setTimeout(checkHomepage, 100);
            setTimeout(checkScript, 300);
            setTimeout(checkError2Github, 500);
            setTimeout(checkManifest, 700);
            setTimeout(checkTime, 900);
        }
        
        // Auto-start on load
        window.onload = function() {
            setTimeout(checkAll, 1000);
        };
    </script>
</body>
</html>